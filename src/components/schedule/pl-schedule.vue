<template>
    <div class="card card-shedule">
      <div class="card-header">
        <div class="client">
          ‚Ññ{{ number }}
        </div>
        <div class="time">
          {{ time }}
        </div>
      </div>

        <div
        class="card-body"
        v-if="isShow"
        >
          <div class="client-name">
            <div class="block-info">
              <h4>–ó–∞–∫–∞–∑—á–∏–∫</h4>
              <div>{{ customer.name }}</div>
            </div>
            <nav>
              <div class="square-button">
                <span class="msg"></span>
              </div>
            </nav>
          </div>
          <div class="client-adress">
            <div class="block-info">
              <div>{{ customer.adress }}</div>
            </div>
            <nav>
              <div class="square-button">
                <span class="msg"></span>
              </div>
            </nav>
          </div>
          <div class="before-price">
            <div class="block-info">
              <h4>–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π —Ä–∞—Å—á—ë—Ç</h4>
              <div>{{ customer.firstPrice }}</div>
            </div>
            <nav>
              <div class="square-button">
                <span class="msg"></span>
              </div>
            </nav>
          </div>
          <div class="manager">
            <div class="block-info">
              <h4>–ú–µ–Ω–µ–¥–∂–µ—Ä</h4>
              <div>{{ customer.manager }}</div>
            </div>
            <nav>
              <div class="square-button">
                <span class="msg"></span>
              </div>
            </nav>
          </div>
          <div class="comment">
            <div class="block-info">
              <h4>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏</h4>
              <div>{{ customer.comment }}</div>
            </div>
          </div>

          <div class="flexwrap" v-if=" done === false ">

            <button
            class="app-btn btn__blue"
            v-on:click="isStart = !isStart" v-if="isStart === false ">–ù–∞—á–∞—Ç—å –∑–∞–º–µ—Ä</button>
            
            <div class="flexwrap" v-else>
              <button
                class="app-btn btn__blue"
                @click="isModalPhoto = !isModalPhoto"
              >–û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ —Ä–∞—Å—á—ë—Ç</button>
              
              <button
                class="app-btn btn__blue"
                @click="addNewOrder(number)"
              >–°–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω—ã–π —Ä–∞—Å—á—ë—Ç</button>
              
              <button
                class="app-btn btn__red"
                @click="isModalEnd = !isModalEnd"
              >–ó–∞–≤–µ—Ä—à–∏—Ç—å –∑–∞–º–µ—Ä</button>
            </div>

          </div>
          <div v-else class="work-end">–ó–∞–º–µ—Ä –∑–∞–≤–µ—Ä—à—ë–Ω</div>

        </div>

      <button class="tape" v-on:click="isShow = !isShow"></button>
      <div v-show=" done === true " class="label-left"><span>–ó–∞–≤–µ—Ä—à–µ–Ω</span></div>

      <b-modal
      centered
      v-model="isModalPhoto"
      title="–ü—Ä–∏–∫—Ä–µ–ø–∏—Ç–µ —Ñ–æ—Ç–æ –≤–∞—à–µ–≥–æ –∑–∞–º–µ—Ä–∞"
      >

        <form action="">
          <input type="file">
        </form>

        <template #modal-footer="{ ok }">
          <button disabled class="app-btn btn__blue" variant="success" @click="ok()">
            –û—Ç–ø—Ä–∞–≤–∏—Ç—å
          </button>
        </template>
        
      </b-modal>

      <b-modal
        centered
        no-stacking
        v-model="isModalEnd"
        title="–í—ã –∑–∞–≤–µ—Ä—à–∞–µ—Ç–µ –∑–∞–º–µ—Ä!<br>–ö–∞–∫–æ–≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤–∞—à–µ–≥–æ –∑–∞–º–µ—Ä–∞?"
      >
        <template #modal-footer="{ ok }">
          <button
            class="app-btn btn__blue"
            @click="ok()"
          >–£—Ä–∞! –î–æ–≥–æ–≤–æ—Ä!</button>
          <button
            class="app-btn btn__blue"
            @click="isModalEndNot = !isModalEndNot"
          >–ü–æ–∫–∞ –Ω–µ–¥–æ–≥–æ–≤–æ—Ä üò≠</button>
        </template>
      </b-modal>

      <b-modal
        centered
        no-stacking
        v-model="isModalEndNot"
        title="–£–∫–∞–∂–∏—Ç–µ –ø—Ä–∏—á–∏–Ω—É –ø–æ –∫–æ—Ç–æ—Ä–æ–π –Ω–µ —É–¥–∞–ª–æ—Å—å –∑–∞–∫–ª—é—á–∏—Ç—å –¥–æ–≥–æ–≤–æ—Ä"
      >

        <form action="">
          <textarea name="" id="" cols="30" rows="10"></textarea>
          <input type="checkbox" name="" id="">
        </form>
        <template #modal-footer="{ ok }">
          <button
            class="app-btn btn__blue"
            @click="ok()"
          >–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
        </template>
      </b-modal>

    </div>
</template>

<script>
import { mapActions } from 'vuex'

export default {
  name: 'pl-schedule',
  props: {
    number: String,
    time: String,
    done: Boolean,
    customer: {
      type: Object,
      required: true,
    }
  },
  data() {
    return {
      isStart: false,
      isShow: false,
      isModalPhoto: false,
      isModalEnd: false,
      isModalEndNot: false
    }
  },
  methods: {
    ...mapActions('configurator', [
        'ADD_ORDER',
    ]),
    addNewOrder: function(number) {
      this.ADD_ORDER(number)
      this.$router.push({ name: 'configurator', params: {ordern: number}, query: { order: number } })
    }
  },
}
</script>

<style scoped>

</style>